<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es"
		xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:fragment="head(styles)">
    <meta charset="UTF-8" />
    <title>Proyecto Restaurante</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <link th:if="${styles}" th:href="@{${styles}}" rel="stylesheet" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

    <style>
      body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      main {
        flex: 1 0 auto;
      }
      footer {
        flex-shrink: 0;
      }
    </style>
    
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>

<body>
<header th:fragment="headerCompleto">

    <div class="container-fluid text-center py-3 border-bottom" style="background-color: #B49214; color: white;">
	    <h1 class="display-5" style="font-family: 'Great Vibes', cursive; font-size: 4rem;">
	        
	        <span sec:authorize="!isAuthenticated()">Bienvenido</span>
	        
	        <span sec:authorize="isAuthenticated()">
	            Bienvenido, <span sec:authentication="name">Usuario</span>
	        </span>
	        
	    </h1>
	</div>
    
    
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #B49214;">
        <div class="container-fluid">
            <a class="navbar-brand">Mi Restaurante</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavMain">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavMain">
            
                <ul class="navbar-nav me-auto">
    
				    <li class="nav-item"><a class="nav-link" th:href="@{/productos}">Ver Men√∫</a></li>
				
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'CAJERO')">
				        <a class="nav-link" th:href="@{/lista}">Ver Clientes</a>
				    </li>
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'CAJERO')">
				        <a class="nav-link" th:href="@{/crear}">Nuevo Cliente</a>
				    </li>
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'CAJERO')">
				        <a class="nav-link" th:href="@{/busquedas}">Buscar Clientes</a>
				    </li>
				
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'SUPERVISOR')">
				        <a class="nav-link" th:href="@{/crearProducto}">Nuevo Producto</a>
				    </li>
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'SUPERVISOR')">
				        <a class="nav-link" th:href="@{/productos/admin}">Lista Productos</a>
				    </li>
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'SUPERVISOR')">
				        <a class="nav-link" th:href="@{/empleados}">Ver Empleados</a>
				    </li>
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'SUPERVISOR')">
				        <a class="nav-link" th:href="@{/mesas}">Mesas</a>
				    </li>
				
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'CAJERO', 'COCINERO', 'MESERO')">
				        <a class="nav-link" th:href="@{/pedidos}">Pedidos</a>
				    </li>
				
				    <li class="nav-item" sec:authorize="hasAnyAuthority('ADMIN', 'CAJERO', 'CLIENTE')">
				        <a class="nav-link" th:href="@{/reservaciones}">Reservar</a>
				    </li>
				
				    <li class="nav-item" sec:authorize="hasAuthority('ADMIN')">
				        <a class="nav-link" th:href="@{/usuarios/index}">Usuarios (Admin)</a>
				    </li>
				</ul>
                
                <div class="d-flex">

				    <div sec:authorize="!isAuthenticated()">
				        <a class="btn btn-outline-light me-2" th:href="@{/login}">
				            <i class="bi bi-box-arrow-in-right"></i> Ingresar
				        </a>
				        
				        <a class="btn btn-light" th:href="@{/usuarios/crear}">
				            <i class="bi bi-person-plus"></i> Registrarse
				        </a>
				    </div>
				
				    <div sec:authorize="isAuthenticated()" class="nav-item dropdown">
    
					    <a class="nav-link dropdown-toggle text-light" href="#" role="button" 
					       data-bs-toggle="dropdown" aria-expanded="false">
					        <i class="bi bi-person-circle"></i> <span sec:authentication="name" class="fw-bold"></span>
					    </a>
					    
					    <ul class="dropdown-menu dropdown-menu-end">
					    
					        <li>
					            <h6 class="dropdown-header">
					               <!--   Rol: --> 
					                <span th:each="authority : ${#authentication.getAuthorities()}"
					                      th:text="${authority.authority} + ' '"
					                      class="text-primary">
					                </span>
					            </h6>
					        </li>
					        <li><hr class="dropdown-divider"></li>
					        <li>
					        <a class="dropdown-item" th:href="@{/perfil/mi-perfil}">
					            <i class="bi bi-person-fill"></i> Mi Perfil
					        </a></li>
					        
					        <li><hr class="dropdown-divider"></li>
					        
					        <li>
					            <form th:action="@{/logout}" method="post" class="d-inline">
					                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
					                <button type="submit" class="dropdown-item text-danger">
					                    <i class="bi bi-box-arrow-right"></i> Salir
					                </button>
					            </form>
					        </li>
					    </ul>
					</div>
				
				</div>
                
            </div>
        </div>
    </nav>
</header>

<footer th:fragment="footer" class="mt-auto py-3" style="background-color: #B49214; color: white;">
  <div class="container">
    <div class="d-flex justify-content-between flex-wrap">
      <div>
        <p class="mb-0">Kevin Yael</p>
        <p class="mb-0">Materia: Temas Selectos de Web</p>
      </div>
      <div class="text-end">
        <p class="mb-0">Ciudad: Chilpancingo</p>
        <p class="mb-0">@Copyright 2025</p>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</footer>
</body>
</html>
